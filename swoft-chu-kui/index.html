<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    Swoft初窥 | 半亩房顶
</title>
<link rel="shortcut icon" href="https://freephenix.github.io//favicon.ico?v=1713840769430">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://freephenix.github.io//styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://freephenix.github.io//media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-147240912-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-147240912-1');
    </script>
    
        
            
                <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
                <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
                

                    
                            
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://freephenix.github.io/">
                <img class="avatar" src="https://freephenix.github.io//images/avatar.png?v=1713840769430" alt="">
            </a>
            <div class="site-title">
                <h1>
                    半亩房顶
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="https://freephenix.github.io//post/guan-yu-ban-mu-fang-ding/" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            Swoft初窥
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-09-06</time>
                            
                                <a href="https://freephenix.github.io/mKJdR76q2/" class="post-tag i-tag
                            i-tag-success">
                            #并发
                        </a>
                                
                                <a href="https://freephenix.github.io/oUrcbPScV/" class="post-tag i-tag
                            i-tag-">
                            #PHP
                        </a>
                                
                                <a href="https://freephenix.github.io/uAlgP99Kyv/" class="post-tag i-tag
                            i-tag-success">
                            #框架
                        </a>
                                
                        </div>
                        
                            <div class="post-feature-image" style="background-image: url('https://freephenix.github.io//post-images/swoft-chu-kui.jpeg')"></div>
                            
                                <div class="post-content">
                                    <p>久仰大名，Swoft</p>
<!-- more -->
<h1 id="前言">前言</h1>
<p>swoole 大名耳闻已久，前段时间发现了基于swoole的高性能协程全栈框架swoft，所以准备初识一下，以备之后学习应用</p>
<h1 id="流程">流程</h1>
<p>其实在安装swoft之前经历了一段很长的路，下面简单罗列下</p>
<h3 id="1-安装brew">1、安装brew</h3>
<pre><code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre>
<p>添加路径</p>
<pre><code>export PATH=/usr/local/bin:$PATH
</code></pre>
<h3 id="2-安装常用命令tree">2、安装常用命令tree</h3>
<pre><code># 安装了brew之后就简单太多了
brew install tree
</code></pre>
<h3 id="3-安装composer">3、安装composer</h3>
<pre><code>php -r &quot;copy('https://install.phpcomposer.com/installer', 'composer-setup.php');&quot; # 下载安装脚本 － composer-setup.php － 到当前目录
php composer-setup.php # 执行安装过程
php -r &quot;unlink('composer-setup.php');&quot; # 删除安装脚本
sudo mv composer.phar /usr/local/bin/composer # 全局安装
composer config -g repo.packagist composer https://packagist.phpcomposer.com # 更换国内镜像源
</code></pre>
<p>composer的使用就不在这里说了，可以自行百度，参考文献中也有对应的文章</p>
<h3 id="4-安装swoole">4、安装swoole</h3>
<p>这一步频繁出问题，首先看下正常流程</p>
<pre><code>#下载解压swoole
cd /swoole-master
phpize (或指定phpize路径 如:/Applications/XAMPP/xamppfiles/bin/phpize)

./configure(或指定php-config路径如：./configure --with-php-config=/Applications/XAMPP/xamppfiles/bin/php- config)

sudo make

sudo make install

# php.ini添加配置 extension=swoole.so 
# 重启Apach服务
</code></pre>
<h1 id="下面说下遇到的问题">下面说下遇到的问题</h1>
<h3 id="1phpize-报错no-such-file-or-directory">（1）phpize 报错No such file or directory</h3>
<p>解决方法：<br>
第一步：确认安装了命令行工具</p>
<pre><code>$ xcode-select --install
xcode-select: note: install requested for command line developer tools
</code></pre>
<p>第二步：如果phpize还是无效、执行下列命令安装header头文件SDK：</p>
<pre><code>$ cd /Library/Developer/CommandLineTools/Packages/
$ open macOS_SDK_headers_for_macOS_10.14.pkg #注意版本号，可能因人而异
</code></pre>
<h3 id="2phpize报错cannot-find-autoconf-please-check-your-autoconf-installation">（2）phpize报错Cannot find autoconf. Please check your autoconf installation</h3>
<p>解决方案：<br>
<code>brew install autoconf</code></p>
<h3 id="3即便使用sudo也提示权限不足">（3）即便使用sudo也提示权限不足</h3>
<p>建议先去了解下mac的Rootless机制<br>
解决方案：</p>
<ul>
<li>重启电脑</li>
<li>开后按住 Command-R 进入恢复分区</li>
<li>然后在 实用工具 栏找到 终端启动运行</li>
<li>输入<code>csrutil disable; reboot</code></li>
</ul>
<h3 id="4使用集成环境造成的php版本混乱导致拓展安装不上">（4）使用集成环境造成的php版本混乱，导致拓展安装不上</h3>
<p>phpize 等步骤时候均使用指定的路径操作，然后建议还是不使用集成环境，毕竟一共就是mysql、php、apache或者nginx三个环境，没什么复杂的，更新升级也简单，添加拓展也会避免很多麻烦</p>
<p>终于终于是安装完swoole拓展了，开始正题<br>
安装swoft</p>
<pre><code>composer create-project swoft/swoft swoft
</code></pre>
<p>进入目录，查看版本</p>
<pre><code>php bin/swoft -v
</code></pre>
<p>开始http服务体验一下吧</p>
<pre><code>sudo php bin/swoft ws:start
#可在.env文件中指定端口
</code></pre>
<p>打开127.0.0.1，终于看到了欢迎页面了<br>
<img src="https://freephenix.github.io//post-images/1599790379409.jpg" alt="不容易啊" loading="lazy"></p>
<h1 id="总结">总结</h1>
<p>步步有坑啊，要有耐心，一步步解决问题，肯定能看到光芒！加油</p>
<h1 id="参考文章">参考文章</h1>
<p>https://blog.csdn.net/boog14/article/details/80331073<br>
https://www.cnblogs.com/richard-youth/p/6297827.html<br>
https://www.jianshu.com/p/adcae6213e9b<br>
https://www.jianshu.com/p/bc4ec0d8ef12?utm_source=oschina-app<br>
https://www.jianshu.com/p/7f3d4415e65b<br>
https://www.jianshu.com/p/015339b565a1<br>
https://blog.csdn.net/happyrabbit456/article/details/44680237<br>
https://www.jianshu.com/p/653fac3d3b83</p>
<hr>
<p>欢迎大家关注我的公众号<br>
<img src="https://freephenix.github.io//post-images/1599790391830.jpeg" alt="半亩房顶" loading="lazy"></p>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li><a href="#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="#%E6%B5%81%E7%A8%8B">流程</a><br>
*
<ul>
<li><a href="#1-%E5%AE%89%E8%A3%85brew">1、安装brew</a></li>
<li><a href="#2-%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4tree">2、安装常用命令tree</a></li>
<li><a href="#3-%E5%AE%89%E8%A3%85composer">3、安装composer</a></li>
<li><a href="#4-%E5%AE%89%E8%A3%85swoole">4、安装swoole</a></li>
</ul>
</li>
<li><a href="#%E4%B8%8B%E9%9D%A2%E8%AF%B4%E4%B8%8B%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">下面说下遇到的问题</a><br>
*
<ul>
<li><a href="#1phpize-%E6%8A%A5%E9%94%99no-such-file-or-directory">（1）phpize 报错No such file or directory</a></li>
<li><a href="#2phpize%E6%8A%A5%E9%94%99cannot-find-autoconf-please-check-your-autoconf-installation">（2）phpize报错Cannot find autoconf. Please check your autoconf installation</a></li>
<li><a href="#3%E5%8D%B3%E4%BE%BF%E4%BD%BF%E7%94%A8sudo%E4%B9%9F%E6%8F%90%E7%A4%BA%E6%9D%83%E9%99%90%E4%B8%8D%E8%B6%B3">（3）即便使用sudo也提示权限不足</a></li>
<li><a href="#4%E4%BD%BF%E7%94%A8%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83%E9%80%A0%E6%88%90%E7%9A%84php%E7%89%88%E6%9C%AC%E6%B7%B7%E4%B9%B1%E5%AF%BC%E8%87%B4%E6%8B%93%E5%B1%95%E5%AE%89%E8%A3%85%E4%B8%8D%E4%B8%8A">（4）使用集成环境造成的php版本混乱，导致拓展安装不上</a></li>
</ul>
</li>
<li><a href="#%E6%80%BB%E7%BB%93">总结</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">参考文章</a></li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://freephenix.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
        
            <script>
    window.onload = function() {
        var gitalk = new Gitalk({
            clientID: '008503f8c8bca8787fbe',
            clientSecret: '5f789f71e3288ff1866d17523348881053068eb4',
            repo: 'freephenix.github.io',
            owner: 'freephenix',
            admin: ['freephenix'],
            id: (location.pathname).substring(0, 49), // Ensure uniqueness and length less than 50
            distractionFreeMode: false // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    }
</script>
                

                    
                                
</body>

</html>